{% extends "admin.html.twig" %}{# Modèle Twig vide #}

{% block menu %}
    <li class="nav-item">
        <a href="{{ path('bk_home') }}" class="nav-link">
            <i class="nav-icon fas fa-th"></i>
            <p>
                Menu Principal
                <span class="right badge badge-danger">Nouveau</span>
            </p>
        </a>
    </li>

    <li class="nav-item">
        <a href="{{ path('user_index') }}" class="nav-link">
            <i class="nav-icon fas fa-history"></i>
            <p>
                Liste des Utilisateurs
                <span class="right badge badge-danger"></span>
            </p>
        </a>
    </li>

    <li class="nav-item">
        <a href="{{ path('account_index') }}" class="nav-link">
            <i class="nav-icon fas fa-exchange-alt"></i>
            <p>
                Liste des Comptes
                <span class="right badge badge-danger"></span>
            </p>
        </a>
    </li>

    <li class="nav-item">
        <a href="{{ path('message_index') }}" class="nav-link">
            <i class="nav-icon fas fa-credit-card"></i>
            <p>
                Liste des Messages
                <span class="right badge badge-danger"></span>
            </p>
        </a>
    </li>

    <li class="nav-item">
        <a href="{{ path('loan_index') }}" class="nav-link">
            <i class="nav-icon fas fa-hand-holding-usd"></i>
            <p>
                Prêts
                <span class="right badge badge-danger"></span>
            </p>
        </a>
    </li>

    <li class="nav-item">
        <a href="#" class="nav-link">
            <i class="nav-icon fas fa-file-invoice-dollar"></i>
            <p>
                Carte de Crédit
                <span class="right badge badge-danger"></span>
            </p>
        </a>
    </li>

    <li class="nav-item">
        <a href="{{ path('receptor_index') }}" class="nav-link active">
            <i class="nav-icon fas fa-users"></i>
            <p>
                Tous les Bénéficiaires
                <span class="right badge badge-danger"></span>
            </p>
        </a>
    </li>

    <li class="nav-item">
        <a href="{{ path('transaction_index') }}" class="nav-link">
            <i class="nav-icon fas fa-users"></i>
            <p>
                Toutes les Transactions
                <span class="right badge badge-danger"></span>
            </p>
        </a>
    </li>
{% endblock %}

{% block body %}
    <section class="content">
        <div class="container-fluid">
            <div class="row">
                <div class="col-12">
                    <div class="callout callout-warning">
                        <h5><i class="fas fa-info"></i> Remarque :</h5>
                        La transaction est {{ transaction.status }}.
                    </div>
                    <style>

.tracking-detail {
 padding:3rem 0
}
#tracking {
 margin-bottom:1rem
}
[class*=tracking-status-] p {
 margin:0;
 font-size:1.1rem;
 color:#fff;
 text-transform:uppercase;
 text-align:center
}
[class*=tracking-status-] {
 padding:1.6rem 0
}
.tracking-status-intransit {
 background-color:#65aee0
}
.tracking-status-outfordelivery {
 background-color:#f5a551
}
.tracking-status-deliveryoffice {
 background-color:#f7dc6f
}
.tracking-status-delivered {
 background-color:#4cbb87
}
.tracking-status-attemptfail {
 background-color:#b789c7
}
.tracking-status-error,.tracking-status-exception {
 background-color:#d26759
}
.tracking-status-expired {
 background-color:#616e7d
}
.tracking-status-pending {
 background-color:#ccc
}
.tracking-status-inforeceived {
 background-color:#214977
}
.tracking-list {
 border:1px solid #e5e5e5
}
.tracking-item {
 border-left:3px solid #d8dee3;
 position:relative;
 padding:2rem 1.5rem .5rem 2.5rem;
 font-size:.9rem;
 margin-left:3rem;
 min-height:5rem
}
.tracking-item:last-child {
 padding-bottom:4rem
}
.tracking-item .tracking-date {
 margin-bottom:.5rem
}
.tracking-item .tracking-date span {
 color:#888;
 font-size:85%;
 padding-left:.4rem
}
.tracking-item .tracking-content {
 padding:.5rem .8rem;
 background-color:#f4f4f4;
 border-radius:.5rem
}
.tracking-item .tracking-content span {
 display:block;
 color:#888;
 font-size:85%
}
.tracking-item .tracking-icon {
 line-height:2.6rem;
 position:absolute;
 left:-1.3rem;
 width:2.6rem;
 height:2.6rem;
 text-align:center;
 border-radius:50%;
 font-size:1.1rem;
 background-color:#fff;
 color:#fff
}
.tracking-item .tracking-icon.status-sponsored {
 background-color:#f68
}
.tracking-item .tracking-icon.status-delivered {
 background-color:#4cbb87
}
.tracking-item .tracking-icon.status-outfordelivery {
 background-color:#f5a551
}
.tracking-item .tracking-icon.status-deliveryoffice {
 background-color:#f7dc6f
}
.tracking-item .tracking-icon.status-attemptfail {
 background-color:#b789c7
}
.tracking-item .tracking-icon.status-exception {
 background-color:#d26759
}
.tracking-item .tracking-icon.status-inforeceived {
 background-color:#214977
}
.tracking-item .tracking-icon.status-intransit {
 color:#3d9970;
 border:1px solid #3d9970;
 font-size:.6rem
}
.tracking-item .tracking-icon.status-intransit1 {
 color:red;
 border:1px solid #e5e5e5;
 font-size:.6rem
}
.tracking-item .tracking-icon.status-intransit2 {
 color:#e5e5e5;
 border:1px solid #e5e5e5;
 font-size:.6rem
}
@media(min-width:992px) {
 .tracking-item {
  margin-left:10rem
 }
 .tracking-item .tracking-date {
  position:absolute;
  left:-10rem;
  width:7.5rem;
  text-align:right
 }
 .tracking-item .tracking-date span {
  display:block
 }
 .tracking-item .tracking-content {
  padding:0;
  background-color:transparent
 }
}
                        
                    </style>

                    

<div class="container">
   <h2>INFORMATIONS SUR LA TRANSACTION</h2>
   <div class="row">
      
      <div class="col-md-12 col-lg-12">
         <div id="tracking-pre"></div>
         <div id="tracking">
            <div class="text-center tracking-status-intransit">
               <p class="tracking-status text-tight"># {{ transaction.amount | format_currency(config.currency)  }} envoyé à {{ transaction.recipient.nom }} {{ transaction.recipient.prenom }}</p>
            </div>
            <div class="tracking-list">
               <div class="tracking-item">
                  <div class="tracking-icon status-intransit">
                      <svg class="svg-inline--fa fa-circle fa-w-16" aria-hidden="true" data-prefix="fas" data-icon="circle" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg="">
                        <path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path>
                     </svg>
                     <!-- <i class="fas fa-check"></i> -->
                    
                  </div>
                  <div class="tracking-date">{{ transaction.date |format_datetime() }}</div>
                  <div class="tracking-content">Votre fonds a été envoyé<span></span></div>
               </div>
               <div class="tracking-item">
                  <div class="tracking-icon status-intransit">
                     <svg class="svg-inline--fa fa-circle fa-w-16" aria-hidden="true" data-prefix="fas" data-icon="circle" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg="">
                        <path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path>
                     </svg>
                     <!-- <i class="fas fa-circle"></i> -->
                  </div>
                  <div class="tracking-date"></span></div>
                  <div class="tracking-content" style="color:green;">Votre argent est en route vers la banque réceptrice<span>la banque réceptrice pourrait prendre jusqu'à 18 heures pour nous l'envoyer. Nous vous informerons de la réception</span></div>
               </div>
               <div class="tracking-item">

                    {% set myDate1 = null %}
                    
                    {% set jour = transaction.date | date('D') %}
                    {% set jourTr = date("now") %}

                        {% if jour == "Fri" %}
                            {% set myDate1= transaction.date | date_modify("+3 day") %}
                        {% elseif jour == "Sat" %}
                            {% set myDate1= transaction.date | date_modify("+2 day") %}
                        {% elseif jour == "Sun" %}
                            {% set myDate1= transaction.date | date_modify("+1 day") %}
                        {% else %}
                            {% set myDate1= transaction.date %}
                        {% endif %}

                   



                  <div class="tracking-icon {% if jourTr >= myDate1 %} status-intransit {% else %} status-intransit2 {% endif %}">
                      <svg class="svg-inline--fa fa-circle fa-w-16" aria-hidden="true" data-prefix="fas" data-icon="circle" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg="">
                        <path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path>
                     </svg>
                     <!-- <i class="fas fa-check"></i> -->
                    
                  </div>
                  <div class="tracking-date">
                    
                     {{ myDate1 |format_datetime() }}
                   
                    </div>
                  <div class="tracking-content">Nous envoyons votre {{ config.currency }}<span></span></div>
               </div>

                {% for tr in transaction.infoTrs %}

                   <div class="tracking-item">
                      <div class="tracking-icon {% if tr.complete %} status-intransit {% else %} status-intransit1 {% endif %}">
                         <svg class="svg-inline--fa fa-circle fa-w-16" aria-hidden="true" data-prefix="fas" data-icon="circle" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg="">
                            <path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path>
                         </svg>
                         <!-- <i class="fas fa-circle"></i> -->
                      </div>
                      <div class="tracking-date">{{ tr.date | date('D d')}}</span></div>
                      <div class="tracking-content" style="color:{% if tr.complete %} green {% else %} red {% endif %};">{{ tr.description }}<span></span></div>
                   </div>
                {% endfor %}

               <div class="tracking-item">
                  <div class="tracking-icon status-intransit2">
                     <svg class="svg-inline--fa fa-circle fa-w-16" aria-hidden="true" data-prefix="fas" data-icon="circle" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg="">
                        <path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path>
                     </svg>
                     <!-- <i class="fas fa-circle"></i> -->
                  </div>
                  <div class="tracking-date">{% if transaction.infoTrs is not empty %} À estimer {% else %} {{ myDate1 | date_modify("+1 day") | date('D d') }} {% endif %}</span></div>
                  <div class="tracking-content">Argent reçu par la banque réceptrice<span></span></div>
               </div>

               <div class="tracking-item">
                  <div class="tracking-icon status-intransit2">
                     <svg class="svg-inline--fa fa-circle fa-w-16" aria-hidden="true" data-prefix="fas" data-icon="circle" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg="">
                        <path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path>
                     </svg>
                     <!-- <i class="fas fa-circle"></i> -->
                  </div>
                  
                 <div class="tracking-date">{% if transaction.infoTrs is not empty %} À estimer {% else %} {{ myDate1 | date_modify("+2 day") | date('D d') }} {% endif %}</span></div>
                  <div class="tracking-content">Transaction terminée<span></span></div>
               </div>
               
            </div>
         </div>
      </div>
   </div>
</div>
                    <!-- /.invoice -->
                </div><!-- /.col -->
            </div><!-- /.row -->
        </div><!-- /.container-fluid -->
    </section>
{% endblock %}
