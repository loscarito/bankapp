{% extends "base.html.twig" %}

{% block title %}Accueil{% endblock %}

{% block menu %}
   
{% endblock %}

{% block body %}
<!-- App Header -->
    <div class="appHeader bg-primary text-light">
        <div class="left">
            <a href="index.html#" class="headerButton" data-bs-toggle="modal" data-bs-target="#sidebarPanel">
                <ion-icon name="menu-outline"></ion-icon>
            </a>
        </div>
        <div class="pageTitle">
            <img src="{{ asset('new assets/assets/img/logo.png') }}" alt="logo" class="logo">
        </div>
        <div class="right">
            <a href="{{ path('bk_inbox') }}" class="headerButton">
                <ion-icon class="icon" name="notifications-outline"></ion-icon>
                <span class="badge badge-danger">{{ app.user.user.messages |length }}</span>
            </a>
            <a class="headerButton" href="javascript:void()" onclick="window.location.hash=&#39;#googtrans(en)&#39;;location.reload();" style="margin-right:5px;"><img src="{{ asset('img/en.png') }}"></a>
       
        </div>
    </div>
    <!-- * App Header -->

<!-- App Capsule -->
    <div id="appCapsule">

        <!-- Wallet Card -->
        <div class="section wallet-card-section pt-1">
            <div class="wallet-card">
                <!-- Balance -->
                <div class="balance">
                    <div class="left">
                        <span class="title">Solde</span>
                        <h1 class="total">{{ app.user.user.account.balance | format_currency(config.currency) }}</h1>
                    </div>
                    <div class="right">
                        <a href="index.html#" class="button" data-bs-toggle="modal" data-bs-target="#depositActionSheet">
                            <ion-icon name="add-outline"></ion-icon>
                        </a>
                    </div>
                </div>
                <!-- * Balance -->
                <!-- Wallet Footer -->
                <div class="wallet-footer">
                    <div class="item">
                        <a href="#">
                            <div class="icon-wrapper bg-danger">
                                <ion-icon name="arrow-down-outline"></ion-icon>
                            </div>
                            <strong>Withdraw</strong>
                        </a>
                    </div>
                    <div class="item">
                        <a href="{{ path('bk_intl') }}">
                            <div class="icon-wrapper">
                                <ion-icon name="arrow-forward-outline"></ion-icon>
                            </div>
                            <strong>Send</strong>
                        </a>
                    </div>
                    <div class="item">
                        <a href="{{ path('bk_cc_list')}}">
                            <div class="icon-wrapper bg-success">
                                <ion-icon name="card-outline"></ion-icon>
                            </div>
                            <strong>Cards</strong>
                        </a>
                    </div>
                    <div class="item">
                        <a href="#" data-bs-toggle="modal" data-bs-target="#exchangeActionSheet">
                            <div class="icon-wrapper bg-warning">
                                <ion-icon name="swap-vertical"></ion-icon>
                            </div>
                            <strong>Exchange</strong>
                        </a>
                    </div>

                </div>
                <!-- * Wallet Footer -->
            </div>
        </div>
        <!-- Wallet Card -->

        <!-- Deposit Action Sheet -->
        <div class="modal fade action-sheet" id="depositActionSheet" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Relevé d'identité bancaire</h5>
                    </div>
                    <div class="modal-body">
                        <div class="action-sheet-content">
                            <form>
                                <div class="form-group basic">
                                    <div class="input-wrapper">
                                        <label for="account1"><strong>Iban</strong></label>
                                         <input type="text" class="form-control" placeholder=""
                                            value="{{ config.iban }}">
                                    </div>
                                </div>

                                <div class="form-group basic">
                                    <div class="input-wrapper">
                                        <label for="account1"><strong>Swift Code</strong></label>
                                         <input type="text" class="form-control" placeholder=""
                                            value="{{ config.swift }}">
                                    </div>
                                </div>
                                <div class="form-group basic">
                                    <div class="input-wrapper">
                                        <label for="account1"><strong>Account number</strong></label>
                                         <input type="text" class="form-control" placeholder=""
                                            value="{{ config.accno }}">
                                    </div>
                                </div>
                                <div class="form-group basic">
                                    <div class="input-wrapper">
                                        <label for="account1"><strong>BIC</strong></label>
                                         <input type="text" class="form-control" placeholder=""
                                            value="{{ config.bic }}">
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- * Deposit Action Sheet -->

        <!-- Withdraw Action Sheet -->
        <div class="modal fade action-sheet" id="withdrawActionSheet" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Withdraw Money</h5>
                    </div>
                    <div class="modal-body">
                        <div class="action-sheet-content">
                            <form>
                                <div class="form-group basic">
                                    <div class="input-wrapper">
                                        <label class="label" for="account2d">From</label>
                                        <select class="form-control custom-select" id="account2d">
                                            <option value="0">Savings (*** 5019)</option>
                                            <option value="1">Investment (*** 6212)</option>
                                            <option value="2">Mortgage (*** 5021)</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="form-group basic">
                                    <div class="input-wrapper">
                                        <label class="label" for="text11d">To</label>
                                        <input type="email" class="form-control" id="text11d" placeholder="Enter IBAN">
                                        <i class="clear-input">
                                            <ion-icon name="close-circle"></ion-icon>
                                        </i>
                                    </div>
                                </div>

                                <div class="form-group basic">
                                    <label class="label">Enter Amount</label>
                                    <div class="input-group mb-2">
                                        <span class="input-group-text" id="basic-addonb1">$</span>
                                        <input type="text" class="form-control" placeholder="Enter an amount"
                                            value="100">
                                    </div>
                                </div>

                                <div class="form-group basic">
                                    <button type="button" class="btn btn-primary btn-block btn-lg"
                                        data-bs-dismiss="modal">Withdraw</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- * Withdraw Action Sheet -->

        <!-- Send Action Sheet -->
        <div class="modal fade action-sheet" id="sendActionSheet" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Send Money</h5>
                    </div>
                    <div class="modal-body">
                        <div class="action-sheet-content">
                            <form>
                                <div class="form-group basic">
                                    <div class="input-wrapper">
                                        <label class="label" for="account2">From</label>
                                        <select class="form-control custom-select" id="account2">
                                            <option value="0">Savings (*** 5019)</option>
                                            <option value="1">Investment (*** 6212)</option>
                                            <option value="2">Mortgage (*** 5021)</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="form-group basic">
                                    <div class="input-wrapper">
                                        <label class="label" for="text11">To</label>
                                        <input type="email" class="form-control" id="text11"
                                            placeholder="Enter bank ID">
                                        <i class="clear-input">
                                            <ion-icon name="close-circle"></ion-icon>
                                        </i>
                                    </div>
                                </div>

                                <div class="form-group basic">
                                    <label class="label">Enter Amount</label>
                                    <div class="input-group mb-2">
                                        <span class="input-group-text" id="basic-addon1">$</span>
                                        <input type="text" class="form-control" placeholder="Enter an amount"
                                            value="100">
                                    </div>
                                </div>

                                <div class="form-group basic">
                                    <button type="button" class="btn btn-primary btn-block btn-lg"
                                        data-bs-dismiss="modal">Send</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- * Send Action Sheet -->

        <!-- Exchange Action Sheet -->
        <div class="modal fade action-sheet" id="exchangeActionSheet" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Exchange Money</h5>
                    </div>
                    <div class="modal-body">
                        <div class="action-sheet-content">
                            <form>
                                <div class="row">
                                    <div class="col-6">
                                        <div class="form-group basic">
                                            <div class="input-wrapper">
                                                <label class="label" for="currency1">From</label>
                                                <select class="form-control custom-select" id="currency1">
                                                    <option value="1">EUR</option>
                                                    <option value="2">USD</option>
                                                    <option value="3">AUD</option>
                                                    <option value="4">CAD</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-6">
                                        <div class="form-group basic">
                                            <div class="input-wrapper">
                                                <label class="label" for="currency2">To</label>
                                                <select class="form-control custom-select" id="currency2">
                                                    <option value="1">USD</option>
                                                    <option value="1">EUR</option>
                                                    <option value="2">AUD</option>
                                                    <option value="3">CAD</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group basic">
                                    <label class="label">Enter Amount</label>
                                    <div class="input-group mb-2">
                                        <span class="input-group-text" id="basic-addon2">$</span>
                                        <input type="text" class="form-control" placeholder="Enter an amount"
                                            value="100">
                                    </div>
                                </div>



                                <div class="form-group basic">
                                    <button type="button" class="btn btn-primary btn-block btn-lg"
                                        data-bs-dismiss="modal">Exchange</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- * Exchange Action Sheet -->
        {% set revenu = 0 %}
                        {% set depense = 0 %}
                        {% for transaction in app.user.user.account.transactions %}
                            {% if transaction.isCredit %}
                                {% set revenu = revenu + transaction.amount %}
                            {% endif %}
                            {% if transaction.isDebit %}
                                {% set depense = depense + transaction.amount %}
                            {% endif %}
                        {% endfor %}
        <!-- Stats -->
        <div class="section">
            <div class="row mt-2">
                <div class="col-6">
                    <div class="stat-box">
                        <div class="title">Income</div>
                        <div class="value text-success"> {{ revenu | format_currency(config.currency) }}</div>
                    </div>
                </div>
                <div class="col-6">
                    <div class="stat-box">
                        <div class="title">Expenses</div>
                        <div class="value text-danger"> {{ depense | format_currency(config.currency) }}</div>
                    </div>
                </div>
            </div>
            
        </div>
        <!-- * Stats -->

        <!-- Transactions -->
        <div class="section mt-4">
            <div class="section-heading">
                <h2 class="title">Transactions</h2>
                <a href="{{ path('bk_statement')}}" class="link">Voir tout</a>
            </div>
            <div class="transactions">
                 {% set i = 1 %}
                 {% if app.user.user.account.transactions is not empty %}
                                        {% for transaction in app.user.user.account.transactions %}
                        {% if i <= 5 %}
                            <a href="{{ path('bk_voir_tr',{'id': transaction.id}) }}" class="item">
                                <div class="detail">
                                    
                                     <img src="{{ transaction.isCredit ? asset('new assets/assets/img/sample/brand/vert.png') : asset('new assets/assets/img/sample/brand/rouge.png') }}" alt="img" class="image-block imaged w48">
                            
                                    <div>
                                        <strong>{{ transaction.description }}</strong>
                                        <p>{{ transaction.depositor ? transaction.depositor : transaction.recipient.nom ~ ' ' ~ transaction.recipient.prenom }}</p>
                                    </div>
                                </div>
                                <div class="right">
                                    <div class="price {{ transaction.isCredit ? '' : 'text-danger' }}"> {{ transaction.isCredit ? '+' : '-' }} {{ transaction.amount | format_currency(config.currency) }}</div>
                                </div>
                            </a>
                        {% endif %}
                    {% set i = i +1 %}
                    {% endfor %}
                 {% else %}

                    <div class="alert alert-danger">
                        vous n'avez aucune transaction pour le moment
                    </div>

                 {% endif %}


                <!-- item -->
               
              
            </div>
        </div>
        <!-- * Transactions -->

        
        <!-- Send Money -->
        <div class="section full mt-4">
            <div class="section-heading padding">
                <h2 class="title">Envoyer de l'argent</h2>
                <a href="{{ path('bk_dest_add')}}" class="link">Ajouter un nouveau récipient</a>
            </div>
            <!-- carousel small -->
           
            <div class="carousel-small splide splide--loop splide--ltr splide--draggable is-active" id="splide04" style="visibility: visible;">
                <div class="splide__track" id="splide04-track" style="padding-left: 16px; padding-right: 16px;">
                    <ul class="splide__list" id="splide04-list">
                    {% if app.user.user.receptors is not empty %}
                        {% for recipient in app.user.user.receptors %}
                            <li class="splide__slide splide__slide--clone" style="margin-right: 16px; width: 115.714px;" aria-hidden="true" tabindex="-1">
                                <a href="{{ path('bk_intl')}}">
                                    <div class="user-card">
                                        <img src="{{ asset('new assets/assets/img/sample/avatar/avatar-default.webp') }}" alt="img" class="imaged w-100">
                                        <strong>{{ recipient.nom }} {{ recipient.prenom }}</strong>
                                    </div>
                                </a>
                            </li>
                        {% endfor %}
                    {% else %}
                         <div class="alert alert-danger">
                            vous n'avez aucune transaction pour le moment
                        </div>
                    {% endif %}
                       </ul>
                </div>
            </div>
            
            <!-- * carousel small -->
        </div>
        <!-- * Send Money -->

        


    





        <!-- app footer -->
        <div class="appFooter">
            <div class="footer-title">
                Copyright © {{ config.siteName }} 2015. All Rights Reserved.
            </div>
         
        </div>
        <!-- * app footer -->

    </div>
    <!-- * App Capsule -->

{%  endblock %}
